
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>Orbis Status</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --ok:#00ff88;
      --warn:#ffb800;
      --err:#ff4757;
      --bg:#0a0a0a;
      --bg-gradient:linear-gradient(135deg,#0a0a0a 0%,#1a1a2e 100%);
      --card:#111111;
      --card-hover:#1a1a24;
      --text:#ffffff;
      --text-secondary:#a1a1aa;
      --text-tertiary:#71717a;
      --border:#27272a;
      --border-hover:#3f3f46;
      --shadow:0 0 0 1px rgba(255,255,255,0.05),0 8px 16px rgba(0,0,0,0.3);
      --shadow-hover:0 0 0 1px rgba(255,255,255,0.1),0 20px 40px rgba(0,0,0,0.4);
      --font:"Inter",system-ui,sans-serif;
    }

    *{box-sizing:border-box;margin:0;padding:0}

    body{
      background:var(--bg-gradient);
      color:var(--text);
      font-family:var(--font);
      min-height:100vh;
      display:flex;
      flex-direction:column;
      align-items:center;
      padding:2rem;
      background-attachment:fixed;
    }

    .header{
      text-align:center;
      margin-bottom:3rem;
      animation:fadeIn .6s ease-out;
    }

    .header h1{
      font-size:2.5rem;
      font-weight:600;
      letter-spacing:-0.02em;
      margin-bottom:.5rem;
      background:linear-gradient(135deg,#ffffff 0%,#a1a1aa 100%);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }

    .header p{
      color:var(--text-secondary);
      font-size:1.125rem;
    }

    #services{
      width:100%;
      max-width:800px;
      display:flex;
      flex-direction:column;
      gap:1rem;
    }

    .service{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:16px;
      padding:1.5rem;
      transition:all .3s ease;
      animation:slideUp .5s ease-out;
      position:relative;
      overflow:hidden;
    }

    .service::before{
      content:'';
      position:absolute;
      inset:0;
      background:linear-gradient(135deg,transparent 0%,rgba(255,255,255,0.02) 100%);
      pointer-events:none;
    }

    .service:hover{
      transform:translateY(-2px);
      border-color:var(--border-hover);
      box-shadow:var(--shadow-hover);
    }

    .service-header{
      display:flex;
      align-items:center;
      gap:1rem;
      margin-bottom:1rem;
    }

    .status-indicator{
      width:12px;
      height:12px;
      border-radius:50%;
      position:relative;
      flex-shrink:0;
    }

    .status-indicator::before{
      content:'';
      position:absolute;
      inset:-4px;
      border-radius:50%;
      animation:pulse-ring 2s infinite;
    }

    .status-indicator.online{
      background:var(--ok);
      box-shadow:0 0 20px rgba(0,255,136,0.4);
    }

    .status-indicator.online::before{
      background:rgba(0,255,136,0.2);
    }

    .status-indicator.offline{
      background:var(--err);
      box-shadow:0 0 20px rgba(255,71,87,0.4);
    }

    .status-indicator.offline::before{
      background:rgba(255,71,87,0.2);
      animation:none;
    }

    .service-name{
      font-size:1.25rem;
      font-weight:500;
      letter-spacing:-0.01em;
    }

    .service-url{
      color:var(--text-tertiary);
      font-size:.875rem;
      font-family:monospace;
      margin-top:.25rem;
    }

    .metrics{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-top:1.5rem;
    }

    .latency{
      font-size:.9375rem;
      color:var(--text-secondary);
      font-weight:500;
    }

    .latency-value{
      color:var(--text);
      font-weight:600;
    }

    .uptime-bar{
      display:flex;
      align-items:center;
      gap:.5rem;
    }

    .uptime-label{
      font-size:.875rem;
      color:var(--text-secondary);
    }

    .history{
      display:flex;
      align-items:center;
      gap:2px;
      height:20px;
      background:rgba(0,0,0,0.2);
      padding:4px;
      border-radius:4px;
    }

    .dot{
      width:4px;
      height:100%;
      border-radius:2px;
      transition:background-color .2s;
    }

    .dot.ok{background:var(--ok)}
    .dot.err{background:var(--err)}
    .dot.unknown{background:#374151}

    .last-updated{
      text-align:center;
      margin-top:2rem;
      color:var(--text-secondary);
      font-size:.875rem;
    }

    .footer{
      margin-top:auto;
      padding-top:3rem;
      text-align:center;
      color:var(--text-tertiary);
      font-size:.875rem;
    }

    @keyframes fadeIn{
      from{opacity:0}
      to{opacity:1}
    }

    @keyframes slideUp{
      from{
        opacity:0;
        transform:translateY(20px);
      }
      to{
        opacity:1;
        transform:translateY(0);
      }
    }

    @keyframes pulse-ring{
      0%{
        transform:scale(1);
        opacity:1;
      }
      100%{
        transform:scale(1.5);
        opacity:0;
      }
    }

    @media(max-width:600px){
      body{padding:1rem}
      .header h1{font-size:2rem}
      .service{padding:1.25rem}
      .service-name{font-size:1.125rem}
    }

    /* Help modal */
    .help-btn{
      position:fixed;
      bottom:2rem;
      right:2rem;
      width:56px;
      height:56px;
      border-radius:50%;
      background:linear-gradient(135deg,#3b82f6 0%,#8b5cf6 100%);
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      box-shadow:0 4px 20px rgba(59,130,246,0.3);
      transition:all .3s ease;
      z-index:1000;
    }

    .help-btn:hover{
      transform:scale(1.1);
      box-shadow:0 6px 30px rgba(59,130,246,0.5);
    }

    .help-btn svg{
      width:24px;
      height:24px;
      fill:white;
    }

    .modal{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.8);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:2000;
      animation:fadeIn .3s ease;
    }

    .modal.show{
      display:flex;
    }

    .modal-content{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:16px;
      padding:2rem;
      max-width:500px;
      width:90%;
      max-height:80vh;
      overflow-y:auto;
      position:relative;
      animation:slideUp .3s ease;
    }

    .close-btn{
      position:absolute;
      top:1rem;
      right:1rem;
      width:32px;
      height:32px;
      border-radius:50%;
      background:rgba(255,255,255,0.1);
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      transition:background .2s;
    }

    .close-btn:hover{
      background:rgba(255,255,255,0.2);
    }

    .modal h2{
      margin-bottom:1rem;
      font-size:1.5rem;
    }

    .modal p{
      color:var(--text-secondary);
      line-height:1.6;
      margin-bottom:1rem;
    }

    .modal code{
      background:rgba(255,255,255,0.1);
      padding:.25rem .5rem;
      border-radius:4px;
      font-family:monospace;
      font-size:.875rem;
    }

    .shortcut{
      display:inline-flex;
      align-items:center;
      gap:.5rem;
      padding:.5rem 1rem;
      background:rgba(255,255,255,0.1);
      border-radius:8px;
      margin:.5rem 0;
    }

    .shortcut kbd{
      background:rgba(255,255,255,0.2);
      padding:.25rem .5rem;
      border-radius:4px;
      font-family:monospace;
      font-size:.875rem;
    }
  </style>
</head>
<body>

<div class="header">
  <h1>Orbis Status</h1>
  <p>Real-time service availability monitoring</p>
</div>

<div id="services"></div>

<div class="last-updated">
  Last updated: <span id="lastUpdated">—</span>
</div>

<div class="footer">
  Powered by Grox Pro Monitoring
</div>

<!-- Help Button -->
<div class="help-btn" onclick="openHelp()">
  <svg viewBox="0 0 24 24">
    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/>
  </svg>
</div>

<!-- Help Modal -->
<div class="modal" id="helpModal">
  <div class="modal-content">
    <button class="close-btn" onclick="closeHelp()">✕</button>
    <h2>How this works</h2>
    <p>
      This page monitors the health of Orbis services by sending lightweight <code>HEAD</code> requests every 5 seconds.
    </p>
    <h3>Color codes</h3>
    <p>
      • <span style="color:#00ff88">Green</span> = Online & healthy<br/>
      • <span style="color:#ff4757">Red</span> = Offline/unreachable<br/>
      • Gray dots = No data yet
    </p>
    <h3>Keyboard shortcuts</h3>
    <div class="shortcut">
      <span>Force refresh</span>
      <kbd>Space</kbd>
    </div>
    <div class="shortcut">
      <span>Toggle help</span>
      <kbd>?</kbd>
    </div>
  </div>
</div>

<script>

const services = [
  { name: 'Panel API', url: 'https://panel.orbis-hosting.xyz/' },
  { name: 'Main Site', url: 'https://orbis-hosting.xyz' },
  { name: 'Docs',      url: 'https://docs.orbis-hosting.xyz' }
];

const svcContainer = document.getElementById('services');
const lastUpdatedEl = document.getElementById('lastUpdated');

services.forEach(s => {
  s.history = new Array(60).fill(null);
  const el = document.createElement('div');
  el.className = 'service';
  el.innerHTML = `
    <div class="service-header">
      <div class="status-indicator offline"></div>
      <div>
        <div class="service-name">${s.name}</div>
        <div class="service-url">${s.url}</div>
      </div>
    </div>
    <div class="metrics">
      <div class="latency">
        <span class="latency-value">Checking...</span>
      </div>
      <div class="uptime-bar">
        <span class="uptime-label">Uptime</span>
        <div class="history"></div>
      </div>
    </div>`;
  svcContainer.appendChild(el);
  s.el = el;
  s.indicator = el.querySelector('.status-indicator');
  s.latencyValue = el.querySelector('.latency-value');
  s.historyEl = el.querySelector('.history');
});


async function ping(url, timeout = 10_000) {
  const controller = new AbortController();
  const id = setTimeout(() => controller.abort(), timeout);
  const start = performance.now();
  try {
    await fetch(
      `${url.replace(/\/$/, '')}/ping-${Date.now()}`, // cache-bust
      { method: 'HEAD', mode: 'no-cors', signal: controller.signal }
    );
  } catch {
   
  }
  clearTimeout(id);
  const ms = Math.round(performance.now() - start);
  return ms >= timeout ? null : ms;
}

async function check(s) {
  const ms = await ping(s.url);
  const ok  = ms !== null;

  s.history.unshift(ok);
  s.history.pop();

  const valid = s.history.filter(v => v !== null);
  const upPercent = valid.length
    ? (valid.filter(v => v).length / valid.length * 100).toFixed(1)
    : 0;


  s.indicator.classList.toggle('online', ok);
  s.indicator.classList.toggle('offline', !ok);

  s.latencyValue.textContent =
    ok ? `${ms} ms · ${upPercent}% uptime` : 'Offline';

  s.historyEl.innerHTML = s.history
    .map(v => `<div class="dot ${v === true ? 'ok' : v === false ? 'err' : 'unknown'}"></div>`)
    .join('');
}

async function run() {
  await Promise.allSettled(services.map(check));
  lastUpdatedEl.textContent = new Date().toLocaleTimeString();
}

run();             
setInterval(run, 5000);

// Modal controls
function openHelp() {
  document.getElementById('helpModal').classList.add('show');
}

function closeHelp() {
  document.getElementById('helpModal').classList.remove('show');
}

// Keyboard shortcuts
document.addEventListener('keydown', (e) => {
  if (e.key === '?') {
    e.preventDefault();
    openHelp();
  }
  if (e.code === 'Space') {
    e.preventDefault();
    run();
  }
});

// Close modal on backdrop click
document.getElementById('helpModal').addEventListener('click', (e) => {
  if (e.target === e.currentTarget) closeHelp();
});
</script>

</body>
</html>
